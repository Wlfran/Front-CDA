<div class="app-container" [class.is-mobile]="!sidenavOpened">
  <!-- Login Layout -->
  <div *ngIf="!isAuthenticated" class="login-layout">
    <router-outlet></router-outlet>
  </div>

  <!-- Main App Layout -->
  <div *ngIf="isAuthenticated" class="main-layout">
    <!-- Toolbar -->
    <mat-toolbar color="primary" class="app-toolbar">
      <button mat-icon-button (click)="toggleSidenav()">
        <mat-icon>menu</mat-icon>
      </button>
      <span class="app-title">CDA Colombia</span>
      <span class="spacer"></span>
      
      <div class="user-menu">
        <span class="welcome-text">Bienvenido, {{ currentUser?.nombre }}</span>
        <button mat-icon-button [matMenuTriggerFor]="userMenu">
          <mat-icon>account_circle</mat-icon>
        </button>
        <mat-menu #userMenu="matMenu">
          <button mat-menu-item disabled>
            <mat-icon>person</mat-icon>
            <span>{{ currentUser?.nombre }}</span>
          </button>
          <button mat-menu-item disabled>
            <mat-icon>badge</mat-icon>
            <span>{{ currentUser?.rol }}</span>
          </button>
          <mat-divider></mat-divider>
          <button mat-menu-item (click)="logout()">
            <mat-icon>exit_to_app</mat-icon>
            <span>Cerrar Sesi√≥n</span>
          </button>
        </mat-menu>
      </div>
    </mat-toolbar>

    <!-- Sidenav Container -->
    <mat-sidenav-container class="sidenav-container">
      <mat-sidenav #drawer mode="side" [opened]="sidenavOpened" class="sidenav">
        <div class="sidenav-content">
          <div class="logo-section">
            <img src="assets/images/logo.png" alt="CDA Colombia" class="logo" 
                 onerror="this.style.display='none'">
            <h3 class="company-name">CDA Colombia</h3>
            <p class="tagline">Taller Automotriz</p>
          </div>

          <mat-nav-list>
            <a mat-list-item 
               *ngFor="let item of menuItems" 
               [routerLink]="item.route"
               routerLinkActive="active">
              <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
              <span matListItemTitle>{{ item.label }}</span>
            </a>
          </mat-nav-list>
        </div>
      </mat-sidenav>

      <mat-sidenav-content class="main-content">
        <div class="content-wrapper">
          <router-outlet></router-outlet>
        </div>
      </mat-sidenav-content>
    </mat-sidenav-container>
  </div>
</div>